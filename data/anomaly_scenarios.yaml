version: 0.1
base_seed: 123
dataset:
  date_col: date
  account_col: account_id
  chat_id_col: chat_id
  chat_type_col: chat_type
  max_concurrent_per_account: 50

defaults:
  account_selection:
    mode: random_k
    k: 20
  window:
    duration_days: 3

scenarios:
  - scenario_id: cost_spike_task_oct
    anomaly_type: cost_spike
    seed: 1001
    account_selection:
      mode: random_k
      k: 30                    # 10x more accounts (was 30)
    window:
      start_date: 2025-10-15
      duration_days: 3
    params:
      component: all             # all | dialog | tasks | classifications | amocrm_call
      magnitude: 100.0            # multiplier = 1 + magnitude (was 6.0, *10 for visibility)
    driver_template: "Increase driven by unusually high token usage in dialog (unit-cost spike)."

  - scenario_id: volume_spike_tasks_mar
    anomaly_type: volume_spike
    seed: 1002
    account_selection:
      mode: random_k
      k: 45                    # 10x more accounts (was 45)
    window:
      start_date: 2025-03-05
      duration_days: 3
    params:
      component: all             # all | tasks | classifications | amocrm_call
      magnitude: 100.0            # new_n = ceil(old_n * (1 + magnitude)) (was 4.0, *10)
      min_base_count: 3
    driver_template: "Increase driven by unusually high number of tasks (usage spike)."

  - scenario_id: cap_spike_jun
    anomaly_type: cap_spike
    seed: 1003
    account_selection:
      mode: random_k
      k: 15                    # 10x more accounts (was 15)
    window:
      start_date: 2025-06-20
      duration_days: 3
    params:
      exceed_by: 300
      dialog_cost_multiplier: 0.5          # was 30, *10 so added rows are much more visible
    driver_template: "Increase driven by unusually high concurrent chats (cap violation)."

version: 0.1
base_seed: 123
dataset:
  date_col: date
  account_col: account_id
  chat_id_col: chat_id
  chat_type_col: chat_type
  max_concurrent_per_account: 50

defaults:
  account_selection:
    mode: random_k
    k: 20
  window:
    duration_days: 3

scenarios:
  - scenario_id: cost_spike_dialog_oct
    anomaly_type: cost_spike
    seed: 1001
    account_selection:
      mode: random_k
      k: 30
    window:
      start_date: 2025-10-15
      duration_days: 3
    params:
      component: dialog          # dialog | tasks | classifications | amocrm_call
      magnitude: 6.0             # multiplier = 1 + magnitude
    driver_template: "Increase driven by unusually high token usage in dialog (unit-cost spike)."

  - scenario_id: volume_spike_tasks_mar
    anomaly_type: volume_spike
    seed: 1002
    account_selection:
      mode: random_k
      k: 45
    window:
      start_date: 2025-03-05
      duration_days: 5
    params:
      component: tasks           # tasks | classifications | amocrm_call
      magnitude: 4.0             # new_n = ceil(old_n * (1 + magnitude))
      min_base_count: 3          # if old_n==0, start from this then spike
    driver_template: "Increase driven by unusually high number of tasks (usage spike)."

  - scenario_id: cap_spike_jun
    anomaly_type: cap_spike
    seed: 1003
    account_selection:
      mode: random_k
      k: 15
    window:
      start_date: 2025-06-20
      duration_days: 2
    params:
      exceed_by: 30              # add chats so rows_per_account_day becomes max_concurrent + exceed_by
    driver_template: "Increase driven by unusually high concurrent chats (cap violation)."
